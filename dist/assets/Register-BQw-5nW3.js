import{r as c,b as P,d as _,e as X,u as M,j as e,m as l,B as x,s as g}from"./index-BnrvrOIj.js";import{L as a,I as m}from"./label-hNtTl7_J.js";import{S as f,a as p,b as j,c as v,d as o,T as Q}from"./select-CxC9Tf-4.js";import{C as S}from"./checkbox-BFZb2yXT.js";import{C as B,b as L,c as O,a as U}from"./card-Dpt68COV.js";import{L as W}from"./lock-yts5fcIP.js";import{C as V}from"./circle-check-big-CjDpVMoA.js";import"./index-BTF9RhN7.js";import"./Combination-BIJkXs1v.js";import"./index-828MpkzG.js";const D="/images/group-q.png",G="/images/second-qr.jpg",F="https://chat.whatsapp.com/IOa3y2QZaaCI1JCHCOmZIP?mode=ems_qr_t",te=()=>{const[s,h]=c.useState({fullName:"",email:"",phone:"",institution:"",year:"",branch:"",experience:"",motivation:"",referralCode:"",attendanceMode:"",agreeTerms:!1,agreeUpdates:!1}),[b,N]=c.useState(!1),[k,I]=c.useState(!1),[R,T]=c.useState(!1),{toast:u}=P(),q=_(),[C]=X(),{user:n}=M();c.useEffect(()=>{n?.email&&h(r=>({...r,email:n.email}))},[n]),c.useEffect(()=>{const r=C.get("ref");r&&h(t=>({...t,referralCode:r}))},[C]),c.useEffect(()=>{(async()=>{if(n?.id)try{const{data:t}=await g.from("registrations").select("*").eq("user_id",n.id).single();t&&T(!0)}catch(t){console.error("Error checking registration:",t)}})()},[n]);const i=(r,t)=>{h(d=>({...d,[r]:t}))},E=()=>["fullName","email","phone","institution","year","branch","attendanceMode"].filter(d=>!s[d]).length>0?(u({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"}),!1):s.agreeTerms?!0:(u({title:"Terms & Conditions",description:"Please agree to the terms and conditions to continue.",variant:"destructive"}),!1),A=async r=>{if(r.preventDefault(),!!E()){N(!0);try{if(!n)return;const t=btoa(n.id).substring(0,8);let d=null;if(s.referralCode){const{data:w}=await g.from("registrations").select("id").eq("referral_code",s.referralCode).single();w&&(d=w.id)}const{error:y}=await g.from("registrations").insert([{user_id:n.id,fullName:s.fullName,email:s.email,phone:s.phone,institution:s.institution,year:s.year,branch:s.branch,experience:s.experience,motivation:s.motivation,referral_code:t,referred_by:d,attendance_mode:s.attendanceMode}]);if(y)throw y;I(!0),u({title:"Registration Successful!",description:"You have registered for Qiskit Fall Fest ðŸŽ‰"})}catch(t){console.error(t),u({title:"Registration Failed",description:t.message||"Try again later.",variant:"destructive"})}finally{N(!1)}}};return n?R||k?e.jsx(l.div,{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(l.div,{className:"max-w-md w-full text-center",children:[e.jsx(l.div,{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(V,{className:"h-10 w-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Registration Successful!"}),e.jsx("p",{className:"mb-6",children:"Thanks for registering! Join our WhatsApp group:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx("img",{src:D,alt:"WhatsApp QR",className:"w-48 h-48 border rounded-lg"}),e.jsx("img",{src:G,alt:"Second QR",className:"w-48 h-48 border rounded-lg"})]}),e.jsx(x,{onClick:()=>window.open(F,"_blank"),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white",children:"Join WhatsApp Group"})]})}):e.jsx(l.div,{className:"min-h-screen bg-background py-20",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(l.div,{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Register for Qiskit Fall Fest 2025"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Secure your spot at IIIT Srikakulam's quantum computing celebration"})]}),e.jsxs(B,{className:"glass-card border border-white/10",children:[e.jsx(L,{children:e.jsx(O,{className:"text-2xl font-semibold",children:"Registration Details"})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(m,{id:"fullName",value:s.fullName,onChange:r=>i("fullName",r.target.value),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"email",children:"Email *"}),e.jsx(m,{id:"email",value:s.email,readOnly:!0,className:"bg-muted cursor-not-allowed"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(m,{id:"phone",value:s.phone,onChange:r=>i("phone",r.target.value),placeholder:"+91 XXXXX XXXXX",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"referralCode",children:"Referral Code (Optional)"}),e.jsx(m,{id:"referralCode",value:s.referralCode,onChange:r=>i("referralCode",r.target.value),placeholder:"Enter referral code if you have one"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"institution",children:"Institution *"}),e.jsx(m,{id:"institution",value:s.institution,onChange:r=>i("institution",r.target.value),placeholder:"Your college/university name",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"year",children:"Academic Year *"}),e.jsxs(f,{value:s.year,onValueChange:r=>i("year",r),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select year"})}),e.jsxs(v,{children:[e.jsx(o,{value:"E1",children:"E1"}),e.jsx(o,{value:"E2",children:"E2"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"branch",children:"Branch/Major *"}),e.jsx(m,{id:"branch",value:s.branch,onChange:r=>i("branch",r.target.value),placeholder:"e.g., Computer Science, Physics",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"attendanceMode",children:"Attendance Mode *"}),e.jsxs(f,{value:s.attendanceMode,onValueChange:r=>i("attendanceMode",r),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select attendance mode"})}),e.jsxs(v,{children:[e.jsx(o,{value:"in-person",children:"In-Person"}),e.jsx(o,{value:"virtual",children:"Virtual"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"experience",children:"Quantum Computing Experience"}),e.jsxs(f,{value:s.experience,onValueChange:r=>i("experience",r),children:[e.jsx(p,{children:e.jsx(j,{placeholder:"Select your experience level"})}),e.jsxs(v,{children:[e.jsx(o,{value:"none",children:"No prior experience"}),e.jsx(o,{value:"beginner",children:"Beginner"}),e.jsx(o,{value:"intermediate",children:"Intermediate"}),e.jsx(o,{value:"advanced",children:"Advanced"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"motivation",children:"Why do you want to attend? (Optional)"}),e.jsx(Q,{id:"motivation",value:s.motivation,onChange:r=>i("motivation",r.target.value),placeholder:"Tell us what motivates you...",rows:3})]}),e.jsxs("div",{className:"space-y-4 border-t border-border pt-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(S,{id:"agreeTerms",checked:s.agreeTerms,onCheckedChange:r=>i("agreeTerms",r)}),e.jsx("div",{className:"text-sm",children:e.jsxs(a,{htmlFor:"agreeTerms",className:"cursor-pointer",children:["I agree to the"," ",e.jsx("a",{href:"/code-of-conduct",className:"text-primary hover:underline",children:"Code of Conduct"})," ","and event terms and conditions. *"]})})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(S,{id:"agreeUpdates",checked:s.agreeUpdates,onCheckedChange:r=>i("agreeUpdates",r)}),e.jsx("div",{className:"text-sm",children:e.jsx(a,{htmlFor:"agreeUpdates",className:"cursor-pointer",children:"I would like to receive updates about future quantum events."})})]})]}),e.jsx(x,{type:"submit",className:"w-full btn-quantum py-3 text-lg font-semibold rounded-lg shadow-lg relative group animate-pulse-glow",disabled:b,children:e.jsx("span",{className:"relative z-10",children:b?"Registering...":"Complete Registration"})}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already registered?"," ",e.jsx("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center justify-center gap-1",children:"Join WhatsApp Group"})]})]})})]})]})})}):e.jsx(l.div,{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(l.div,{className:"max-w-md w-full text-center",children:[e.jsx(l.div,{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(W,{className:"h-10 w-10 text-blue-600"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sign In Required"}),e.jsx("p",{className:"mb-6",children:"Please sign in to access the registration form."}),e.jsx(x,{onClick:()=>q("/login"),children:"Go to Login"})]})})};export{te as default};
